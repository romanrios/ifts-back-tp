extends ../layout

block content
  .d-flex.justify-content-between.align-items-center.mb-3
    h2.mb-0 ðŸ›’Lista de Pedidos
    a.btn.btn-success(href="/pedidos/agregar")
        i.bi.bi-plus-circle.me-2
        | Agregar Pedido

  .table-responsive
    table.table.table-striped.table-hover.table-sm(style="table-layout: fixed;")
      thead
        tr
          th Cliente
          th DescripciÃ³n
          th Precio
          th Plataforma
          th Empleado
          th.acciones Acciones
      tbody
        each pedido in pedidos
          tr
            td= pedido.cliente ? `${pedido.cliente.nombre} (${pedido.cliente.telefono})` : 'Sin cliente'
            td(style="word-break: break-word;")= pedido.descripcion
            td= pedido.precio ? `$${pedido.precio}` : '-'
            td= pedido.plataforma ? pedido.plataforma.nombre : 'Directo'
            td= pedido.idEmpleado ? (pedido.idEmpleado.rol ? `${pedido.idEmpleado.rol} (${pedido.idEmpleado.area})` : pedido.idEmpleado) : '-'
            td.acciones
              .d-flex.align-items-center.justify-content-center(style="height:100%; gap:0.25rem; flex-wrap:nowrap; overflow:hidden;")
                a.btn.btn-sm.btn-info(href=`/pedidos/${pedido._id}` title="Ver") 
                  i.bi.bi-eye
                a.btn.btn-sm.btn-warning(href=`/pedidos/${pedido._id}/editar` title="Editar") 
                  i.bi.bi-pencil
                a.btn.btn-sm.btn-danger(href=`/pedidos/${pedido._id}/borrar` title="Borrar") 
                  i.bi.bi-trash
