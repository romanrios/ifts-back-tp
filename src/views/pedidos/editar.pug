extends ../layout

block content
  h2.mb-3 Editar Pedido

  form(action=`/pedidos/${pedido._id}?_method=PUT` method="POST")
    .mb-3
      label.form-label(for="cliente") Cliente
      select.form-select(name="cliente" id="cliente" required)
        option(value="" disabled) Selecciona un cliente
        each c in clientes
          if pedido.cliente && c._id.toString() === pedido.cliente._id.toString()
            option(value=c._id selected)= `${c.nombre} (${c.telefono})`
          else
            option(value=c._id)= `${c.nombre} (${c.telefono})`
    .mb-3
      label.form-label(for="descripcion") Descripci√≥n
      input.form-control(type="text" name="descripcion" id="descripcion" value=pedido.descripcion required)
    .mb-3
      label.form-label(for="precio") Precio
      input.form-control(type="number" name="precio" id="precio" value=pedido.precio required)
    .mb-3
      label.form-label(for="plataforma") Plataforma
      select.form-select(name="plataforma" id="plataforma" required)
        option(value="" disabled) Selecciona una plataforma
        option(value="Sabor Urbano" selected=pedido.plataforma=="Sabor Urbano") Sabor Urbano
        option(value="Rappi" selected=pedido.plataforma=="Rappi") Rappi
        option(value="Pedidos Ya" selected=pedido.plataforma=="Pedidos Ya") Pedidos Ya
    .mb-3
      label.form-label(for="idEmpleado") Empleado asignado
      select.form-select(name="idEmpleado" id="idEmpleado" required)
        option(value="" disabled) Selecciona un empleado
        each empleado in empleados
          option(
            value=empleado._id
            selected=(pedido.idEmpleado && empleado._id==pedido.idEmpleado._id)
          ) #{empleado._id} - #{empleado.rol} (#{empleado.area})
    .d-flex.gap-2
      button.btn.btn-primary(type="submit") Guardar cambios
      a.btn.btn-secondary(href="/pedidos") Cancelar
